{{- $url := .Get "url" -}}
{{- $text := .Get "text" | default (.Inner | markdownify | plainify | chomp) -}}
{{- $title := .Get "title" | default (.Get "text") | default (.Inner | markdownify | plainify | chomp) | default (path.Base $url) -}}
{{- $page := .Get "page" | default "1" -}}
{{- $id := printf "pdf-modal-%s-%s" (substr ($url | md5) 0 8) $page -}}
{{- $as := .Get "as" | default "link" -}}

{{ $modalHtml := partial "pdf-modal-content.html" (dict "id" $id "title" $title "url" $url "page" $page) }}

{{ if eq $as "button" }}
<a href="javascript:void(0)" class="book-btn" onclick="injectPdfModal('{{ $id }}', `{{ $modalHtml | safeHTML }}`)">{{ $text }}</a>
{{ else }}
<a href="javascript:void(0)" class="pdf-btn-inline" onclick="injectPdfModal('{{ $id }}', `{{ $modalHtml | safeHTML }}`)">{{ $text }}</a>
{{ end }}

